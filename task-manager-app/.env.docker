# ==========================================
# ENVIRONMENT VARIABLES FOR DOCKER
# ==========================================
# Questo file contiene le variabili d'ambiente
# per l'esecuzione in Docker con mount NAS persistente

# Server Configuration
PORT=5000
NODE_ENV=production

# ==========================================
# DATABASE - PERCORSI PERSISTENTI SUL NAS
# ==========================================
# Il path /data/molino viene montato dal docker-compose.yml
# da /mnt/molino/data/molino (sul NAS fisico)
DATABASE_URL=file:/data/molino/tasks.db

# JWT Secret - CAMBIA QUESTO IN PRODUZIONE!
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-12345

# Admin User (credenziali di default)
DEFAULT_MASTER_USER=master
DEFAULT_MASTER_PASS=masterpass

# ==========================================
# BACKUP CONFIGURATION - PERCORSI PERSISTENTI
# ==========================================
# Tutti i backup vengono salvati nel mount NAS
# che è persistente anche se il container si ferma
BACKUP_DIR=/data/molino/backups
BACKUP_DIR_LOCAL=/data/molino/backups
BACKUP_DIR_NAS=/data/molino/backups

# ==========================================
# NAS BACKUP SERVER CONFIGURATION
# ==========================================
# Il NAS Backup Server è un container separato
# che gestisce i backup via HTTP API
# 
# Usa 'nas-backup-server' come hostname (nome del servizio Docker)
# Oppure usa l'IP esterno se necessario
NAS_URL=nas-backup-server
NAS_PORT=5000
NAS_PATH=/data/molino/backups

# Auto Backup Schedule (in minuti) - ogni ora
BACKUP_INTERVAL_MINUTES=60

# Additional Configuration
LOG_LEVEL=info
CORS_ORIGIN=*

# ==========================================
# ISTRUZIONI IMPORTANTI:
# ==========================================
# 
# 1. BEFORE STARTING CONTAINERS:
#    Esegui il setup del mount NAS:
#    sudo bash setup-nas-mount.sh
#
# 2. MOUNT VERIFICATION:
#    Il percorso /data/molino è un BIND MOUNT che punta a:
#    /mnt/molino/data (sul filesystem del NAS)
#
# 3. SE MODIFICHI I PERCORSI:
#    - Modifica /mnt/molino nel docker-compose.yml
#    - Assicurati che la directory esista sul NAS
#    - Ricreate i container: docker-compose down && docker-compose up -d --build
#
# 4. VERIFICARE IL MOUNT:
#    docker-compose exec molino-app ls -la /data/molino
#
# 5. PERMESSI DIRECTORY:
#    Devono essere almeno 755:
#    sudo chmod -R 755 /mnt/molino/data
#
# 6. I DATI SONO SALVATI IN:
#    /mnt/molino/data/molino/tasks.db (database SQLite)
#    /mnt/molino/data/molino/backups/ (tutti i backup)
